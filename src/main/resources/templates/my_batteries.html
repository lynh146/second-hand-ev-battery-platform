<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Pin của tôi - EV MARKET</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/my_batteries.css">
</head>

<body>

<div th:replace="fragments/header :: header"></div>

<section class="container py-4">

    <h3 class="fw-bold mb-4">
        <i class="fa-solid fa-car-battery text-warning me-2"></i>Pin EV của tôi
    </h3>

    <div th:if="${listings.size() == 0}">
        <p class="text-muted">Bạn chưa đăng tin nào.</p>
    </div>

    <div th:each="l : ${listings}" class="listing-item mb-3">
        <div class="d-flex gap-3">

            <img th:src="${l.images.size() > 0 ? l.images.get(0).imageUrl : '/images/no-image.png'}"
                 class="thumbnail">

            <div class="flex-grow-1">

                <!-- TITLE -->
                <h5 class="fw-bold mb-1">
                    <span th:text="${l.title}"></span>

                    <!-- BADGE SOLD -->
                    <span th:if="${l.status == 'SOLD'}"
                          class="badge bg-danger ms-2">ĐÃ BÁN</span>
                </h5>

                <p class="text-muted mb-1" th:text="${l.description}"></p>
                <p class="fw-bold text-danger"
                   th:text="${#numbers.formatInteger(l.price,3,'POINT')} + ' đ'"></p>

                <!-- BUTTONS ONLY IF NOT SOLD -->
                <div class="d-flex gap-2 mt-2" th:if="${l.status != 'SOLD'}">

                    <button class="btn btn-outline-primary btn-sm"
                            th:onclick="'editBattery(' + ${l.listingID} + ')'">
                        <i class="fa-solid fa-pen me-1"></i>Sửa
                    </button>

                    <button class="btn btn-outline-danger btn-sm"
                            th:onclick="'deleteBattery(' + ${l.listingID} + ')'">
                        <i class="fa-solid fa-trash me-1"></i>Xóa
                    </button>

                </div>

            </div>
        </div>
    </div>

</section>

<div th:replace="fragments/footer :: footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/header.js}"></script>
<script th:src="@{/js/my_batteries.js}"></script>

</body>
</html>
m